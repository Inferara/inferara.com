{{ if (eq $.Page.Params.math "katex") }}
    {{ partial "helpers/katex.html" . }}
{{ end }}

{{ template "_internal/google_analytics.html" . }}

{{- /* Design System CSS */ -}}
{{- $designSystem := resources.Get "css/common/design-system.css" | resources.Minify | resources.Fingerprint -}}
<link rel="stylesheet" href="{{ $designSystem.RelPermalink }}" />

{{- /* Image Modal Component CSS */ -}}
{{- $css := resources.Get "css/common/redesign.css" | resources.Minify | resources.Fingerprint -}}
<link rel="stylesheet" href="{{ $css.RelPermalink }}" />

{{- /* OpenGraph & Twitter Card meta tags */ -}}
{{- $title := cond .IsHome site.Title (printf "%s | %s" .Title site.Title) -}}
{{- $description := "" -}}
{{- if .Description -}}
  {{- $description = .Description -}}
{{- else if .IsPage -}}
  {{- $description = .Summary -}}
{{- else if site.Params.description -}}
  {{- $description = site.Params.description -}}
{{- end -}}
{{- $url := .Permalink -}}
{{- $image := "" -}}
{{- if .Params.image -}}
  {{- $image = printf "%s%s" site.BaseURL .Params.image -}}
{{- else -}}
  {{- $image = printf "%s/images/inferara-og-default.png" site.BaseURL -}}
{{- end -}}

<!-- OpenGraph -->
<meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:url" content="{{ $url }}">
<meta property="og:site_name" content="{{ site.Title }}">
{{- if $image }}
<meta property="og:image" content="{{ $image }}">
{{- end }}
{{- if .IsPage }}
<meta property="article:published_time" content="{{ .PublishDate.Format "2006-01-02T15:04:05Z07:00" }}">
<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
{{- end }}
{{- with .Params.tags }}
{{- range first 6 . }}
<meta property="article:tag" content="{{ . }}">
{{- end }}
{{- end }}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ $title }}">
<meta name="twitter:description" content="{{ $description }}">
{{- if $image }}
<meta name="twitter:image" content="{{ $image }}">
{{- end }}
{{- with site.Params.social.twitter }}
<meta name="twitter:site" content="@{{ . }}">
<meta name="twitter:creator" content="@{{ . }}">
{{- end }}
